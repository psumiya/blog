<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Gerrit Code Review Best Practices" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="keywords" content="Gerrit,Git,Code,Review,Best,Practice,Practices,Challenges,gerrit best practices,gerrit code review, gerrit code review best practices" />
    <title>Gerrit Best Practices</title>
	<link rel="stylesheet" type="text/css" href="dist/components/reset.css">
	<link rel="stylesheet" type="text/css" href="dist/components/site.css">

	<link rel="stylesheet" type="text/css" href="dist/components/container.css">
	<link rel="stylesheet" type="text/css" href="dist/components/grid.css">
	<link rel="stylesheet" type="text/css" href="dist/components/header.css">
	<link rel="stylesheet" type="text/css" href="dist/components/image.css">
	<link rel="stylesheet" type="text/css" href="dist/components/menu.css">

	<link rel="stylesheet" type="text/css" href="dist/components/divider.css">
	<link rel="stylesheet" type="text/css" href="dist/components/list.css">
	<link rel="stylesheet" type="text/css" href="dist/components/segment.css">
	<link rel="stylesheet" type="text/css" href="dist/components/dropdown.css">
	<link rel="stylesheet" type="text/css" href="dist/components/icon.css">

	<link rel="stylesheet" type="text/css" href="dist/components/item.css">
	<link rel="stylesheet" type="text/css" href="dist/components/card.css">

	<style type="text/css">
		body {
			background-color: #FFFFFF;
		}

		.main.container {
			margin-top: 5em;
		}

		.ui.footer.segment {
			margin: 5em 0em 0em;
			padding: 5em 0em;
		}
	</style>
</head>

<body>

	<div class="ui fixed inverted menu">
		<div class="ui container">
			<a href="index.html" class="header item">
				Sumiya
			</a>
			<a href="index.html" class="item">Home</a>
		</div>
	</div>

	<div class="ui main text container">	

	<section>
			<div>
					<h1>Gerrit Best Practices</h1>
				<div>
					<div>
						<section>
							<p>When we switched from Subversion to Git for our source code management, one of the tools we adopted was Gerrit. Gerrit is a web based code review system for Git.<br />&nbsp;<br />Learn more about Gerrit <a href="https://www.gerritcodereview.com/">here</a>.<br />&nbsp;<br />Here are some learnings that have evolved out of Gerrit's usage. The post is based on the following branching model.</p>

							<div>
								<div style="padding-top:10px;padding-bottom:10px;margin-left:0px;margin-right:0px;text-align:center">
									<a>
										<img src="images/3852222_orig.png" alt="Branching Model for Merges and Build" style="width:auto;max-width:100%" />
									</a>
									<div style="display:block;font-size:90%">Branching Model for Merges and Build</div>
								</div>
							</div>
		
							<p>
								<ol>
									<li><strong>Use Local Branches for Each Feature or Issue you are working on</strong>.&nbsp;This helps in clean merges. E.g. say you fixed two issues on a single local branch and pushed them for review. If the reviewer finds one issue fix good to go, but notices a problem with the other fix, both the fixes now get stuck because the code cannot be merged. The best way possible is to clone the master, then switch/ create a local for the branch you need.</li>
									<li><strong>Before Pushing, ensure you have done a Pull, and resolved any eventual conflicts</strong>. This is a good practice in general with any version control system though, and not exclusive to Git/Gerrit model.</li><li><strong>For new files, remember to <em>Add</em> them to Git</strong>. This ensures if you have only versioned files being committed, Git will remember to pick this file up when committing.</li>                                        
									<li><strong>How to re-baseline if I come back from vacation? Or, have not taken an update in the last few days?</strong>&nbsp;For a scenario where you (as a developer) are too far away from the main branch, I recommend Stashing your current changes, then doing a Pull from main Repository, and then Popping out your local changes you stashed before the pull. You will get a clean listing of conflicts, if any, that can now be resolved.</li>
									<li><strong>How to share un-approved work?</strong>&nbsp;E.g. say a developer takes a leave, has done some piece of code that is functionally a significant chunk, but he/she didn&rsquo;t feel would meet your quality test (PMD/CheckStyle/Findbugs/Sonar, or others), you can still use that piece of code.<br />Have the developer commit that change to the review branch. Then download that patch from Gerrit and apply it to a new local branch. Now you can continue to make that piece better till it is ready for review.</li>
									<li><strong>I applied the patch, but it shows up as committed. I want to own the change and send it as a single change to my reviewer.</strong>&nbsp;<br />There are a few options to resolve this.<br />You can continue working till you are ready to commit, just ensure you do an <em>amend commit</em>, thus previous changes and your changes&nbsp;now get pushed as a single change to the reviewer.<br />Or, you can commit the new changes. Then <em>combine</em> the previous and this commit. And then push for review. To combine commit using TortoiseGit, Show Log, then select multiple revisions of interest, right-click and combine commit. Again, reviewer will see it as a single change in Gerrit with you as the owner.<br />Or, do a <em>mixed reset</em> to the version before the patch commit, and then you will have a unclean working tree where you can continue making changes. When using TortoiseGit, Show Log on branch, right click on the N &ndash; 1 revision, and do a mixed reset. Remember, doing a hard reset will result in all code before that revision being wiped out.</li>
								</ol>
								<br />
								In summary, to avoid surprises, the trick with Gerrit is to always have only one change (implying single push to remote) going to remote from one clean local branch.        
							</p>							
						</section>
					</div>
				</div>
			</div>
		</section>

	</div>
	
	<div class="ui inverted vertical footer segment">
		<div class="ui center aligned container">
			<div class="ui stackable inverted divided grid">
				<div class="three wide column">
					<h4 class="ui inverted header">Collections</h4>
					<div class="ui inverted link list">
						<a href="java.html" class="item">Java</a>
						<a href="spring.html" class="item">Spring</a>
						<a href="scala.html" class="item">Scala</a>
						<a href="akka.html" class="item">Akka</a>
					</div>
				</div>
				<div class="three wide column">
					<h4 class="ui inverted header">Collections</h4>
					<div class="ui inverted link list">
						<a href="cloud.html" class="item">Cloud</a>
						<a href="software-engineering.html" class="item">Application Architecture</a>
					</div>
				</div>
				<div class="seven wide column">
					<h4 class="ui inverted header">Contact</h4>
					<p>Drop me a message on
						<a href="https://www.linkedin.com/in/sumiya">LinkedIn.com</a> if you have suggestions, want to connect, or have any questions.</p>
				</div>
			</div>
			<div class="ui inverted section divider"></div>
			<div class="ui horizontal inverted small divided link list">
				<a class="item" href="help.html">Help</a>
				<a class="item" href="help.html">Site Map</a>
				<a class="item" href="https://www.linkedin.com/in/sumiya">Contact</a>
				<a class="item" href="privacy-policy.html">Privacy Policy</a>
			</div>
		</div>
	</div>
   
</body>

</html>